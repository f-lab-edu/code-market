# 1.회원가입

## 1-1.정상 흐름
1-1-1. 회원이 회원가입 화면으로 진입
1-1-2. 회원이 이메일/비밀번호 입력 후 서버로 회원가입 요청을 전송한다.   
1-1-3. 서버는 이메일 중복 검증을 통과한다.   
1-1-4. 서버는 비밀번호 정책 검증을 통과한다.   
1-1-5. 서버는 회원 가입을 완료하고 성공 코드와 메시지를 반환한다.   
1-1-6. 회원은 화면에서 성공 메시지를 확인한다.   

## 1-2.실패 흐름
### 1-2-1.이메일이 이미 존재하는 경우
1-2-1-1. 서버는 이메일 중복 검증에서 실패하고, “이미 사용 중인 이메일”에 대한 에러 코드·메시지를 반환한다.

### 1-2-2.비밀번호 정책에 맞지 않는 경우
1-2-2-1. 서버는 비밀번호 검증에서 실패하고, “비밀번호 정책 위반”에 대한 에러 코드·메시지를 반환한다.   
1-2-2-2. 회원은 화면에서 실패 메시지를 확인하고, 값을 수정하여 다시 시도한다.   

# 2. 로그인
## 2-1. 정상 흐름
2-1-1. 회원이 로그인 화면으로 진입
2-1-2. 회원은 이메일/비밀번호를 입력하고 서버로 로그인 요청을 전송한다.
2-1-3. 서버는 해당 이메일의 회원을 찾는다.
2-1-4. 서버는 저장된 비밀번호와 입력한 비밀번호가 일치함을 검증한다.
2-1-5. 서버는 로그인 성공 응답을 반환하고, 토큰을 발급한다.
2-1-6. 회원은 성공 메시지 혹은 메인 화면으로의 이동을 확인한다.

## 2-2. 실패 흐름
### 2-2-1. 이메일이 존재하지 않는 경우
2-2-1-1. 서버는 회원 조회 단계에서 실패하고, “존재하지 않는 이메일” 에러 코드·메시지를 반환한다.

### 2-2-2. 이메일은 존재하지만 비밀번호가 일치하지 않는 경우
2-2-2-1. 서버는 비밀번호 검증에서 실패하고, “비밀번호 불일치” 에러 코드·메시지를 반환한다.
2-2-2-2. 회원은 화면에서 실패 메시지를 확인하고 다시 입력한다.

# 3. 상품 검색
## 3-1. 정상 흐름
3-1-1. 회원이 검색화면에 진입한다.
3-1-2. 회원이 상품명을 입력하여 검색 요청을 보낸다.
3-1-3. 서버는 조건에 맞는 상품 목록을 조회하고 목록을 반환한다.
3-1-4. 회원은 상품 목록을 확인한다
3-1-5. 회원은 목록에서 특정 상품을 클릭하여 상세 화면으로 진입한다.
3-1-6. 서버는 해당 상품의 상세 정보를 조회하여 반환한다.
3-1-7. 회원은 화면에서 상품 상세 정보를 확인한다.

## 3-2. 실패 흐름
### 3-2-1. 검색 조건에 해당하는 상품이 없는 경우
3-2-1-1. 서버는 빈 목록을 반환한다.
  

# 4. 장바구니 추가
## 4-1. 정상 흐름
4-1-1. 회원이 상품 상세 화면에서 “장바구니에 추가” 버튼을 클릭한다.
4-1-2. 서버는 로그인 여부를 검증한다, 
4-1-3. 서버는 상품 판매 가능 여부를 검증한다.
4-1-4. 서버는 상품의 재고 등을 검증한다.
4-1-5. 서버는 모든 검증을 통과하면 해당 상품(들)을 해당 회원의 장바구니 데이터에 저장한다.
4-1-6. 서버는 장바구니 추가 성공 코드와 메시지를 반환한다.
4-1-7. 회원은 화면에서 성공 메시지를 확인한다.

## 4-2. 실패 흐름
### 4-2-1. 로그인하지 않은 상태
4-2-1-1. 서버는 로그인 정보를 찾지 못하고, 인증 관련 에러 코드·메시지를 반환한다.

### 4-2-2. 상품이 판매 중지 상태이거나 재고가 없는 경우
4-2-2-1. 서버는 판매 가능 여부/재고 검증 단계에서 실패하고, 그에 맞는 에러 코드·메시지를 반환한다.

# 5. 주문 생성(장바구니 → 주문)
## 5-1. 정상 흐름
5-1-1. 회원이 장바구니에서 “주문하기” 버튼을 클릭하여 주문 정보 화면으로 진입한다.
5-1-2. 회원은 주문 정보 화면에서 주문할 상품의 정보를 확인하거나 수정한다.
5-1-3. 회원은 주문 정보 화면에서 주문 정보 확인이 끝나, "결제하기" 버튼을 클릭한다.
5-1-4. 서버는 주문 생성 전에 상품 판매 가능 여부를 확인한다.
5-1-5. 서버는 재고 정보를 재검증한다.
5-1-6. 검증을 통과하면 서버는 주문을 생성하고, 주문 상태를 CREATED로 설정한다.
5-1-7. 회원은 주문 정보 화면에서 생성된 주문 내용을 확인한다.

## 5-2. 실패 흐름
### 5-2-1. 로그인 정보가 없거나 세션이 만료된 경우
5-2-1-1. 서버는 인증 검증에서 실패하고 에러 코드·메시지를 반환한다.

### 5-2-2. 장바구니에 담긴 상품 중 일부가 더 이상 판매 불가 또는 재고 부족인 경우
5-2-2-1. 서버는 검증 단계에서 실패하고 “주문 불가(재고/판매 상태)” 에러 코드·메시지를 반환한다.
5-2-2-2. 회원은 실패 메시지를 보고 장바구니를 수정하거나, 재시도한다.

# 6. 결제
## 6-1. 정상 흐름
6-1-1. 회원이 주문 정보 화면에서 내용을 확인한 뒤 “결제하기” 버튼을 클릭한다.
6-1-2. 서버는 주문이 생성(CREATED) 상태인지 검증한다.
6-1-3. 서버는 포함된 상품의 판매 상태를 검증한다.
6-1-4. 서버는 재고가 정상인지 재검증한다.
6-1-5. 검증에 성공하면 서버는 결제 정보 입력 화면 URL을 반환하고, 결제 상태를 PENDING으로 설정한다.
6-1-6. 회원은 PG 결제 화면으로 이동해 결제 정보를 입력한다. 
6-1-7. 회원은 결제 화면에서 최종 결제 요청을 진행한다.
6-1-8. 화면(클라이언트)은 입력된 결제 정보와 함께 서버로 “결제 승인 API”를 호출한다.
6-1-9. 서버는 PG에 결제 승인 요청을 보내기 전에, 요청된 결제 정보와 주문 정보의 일치 여부를 검증한다.
6-1-10. 서버는 PG사에 결제 승인 API를 호출한다.
6-1-11. PG사는 결제 승인 API 응답으로 성공을 반환한다.
6-1-12. 서버는 재고를 차감하고, 주문 상태를 COMPLETED로 변경하고, 결제 상태를 PAID로 설정한다.
6-1-13. 회원은 결제 성공 화면/메시지를 확인한다.

## 6-2. 실패 흐름
### 6-2-1. 주문이 존재하지 않거나 CREATED 상태가 아닌 경우
6-2-1-1. 서버는 초기 검증 단계에서 실패하고, 주문 상태 이상에 대한 에러 코드·메시지를 반환한다.

### 6-2-2. 주문의 상품 중 일부가 더 이상 판매 불가 혹은 재고 부족인 경우
6-2-2-1. 서버는 검증 단계에서 실패하고, “결제 진행 불가(재고/판매 상태)” 에러를 반환한다.

### 6-2-3. 결제 정보와 주문 정보가 일치하지 않는 경우 (금액, 주문 ID 등)
6-2-3-1. 서버는 자체 검증에서 실패하고, 데이터 불일치 에러를 반환한다.

### 6-2-4. PG 응답이 실패인 경우(승인 거절, 한도 초과, 네트워크 오류 등)
6-2-4-1. 서버는 결제 실패로 판단하고 주문 상태를 CREATED로 유지, 결제 상태를 FAILED로 설정한다.
6-2-4-2. 클라이언트에는 결제 실패 코드·메시지를 반환한다.
6-2-4-3. 회원은 실패 메시지를 확인하고, 결제를 재시도하거나 주문을 수정한다.

# 7. 프로필 수정
## 7-1. 정상 흐름
7-1-1. 회원이 마이페이지로 진입
7-1-2. 회원이 “프로필 수정”을 클릭한다.
7-1-3. 서버는 로그인 정보를 검증한다.
7-1-4. 서버는 회원 상세 정보를 반환한다.
7-1-5. 회원은 화면에서 기존 정보를 확인한다.
7-1-6. 회원은 수정할 정보를 입력해 서버로 요청한다.
7-1-7. 서버는 수정된 회원 정보의 유효성(형식, 정책 등)을 검증한다.
7-1-8. 검증에 성공하면 서버는 회원 정보를 업데이트하고 성공 메시지를 반환한다.
7-1-9. 회원은 화면에서 수정 결과(성공 메시지 혹은 변경된 정보)를 확인한다.

## 7-2. 실패 흐름
### 7-2-1. 로그인 정보가 없거나 세션이 만료된 경우
7-2-1-1. 서버는 인증 검증에서 실패하고 에러 코드·메시지를 반환한다.

### 7-2-2. 수정 요청한 정보가 정책에 맞지 않는 경우 (예: 비밀번호 길이 등)
7-2-2-1. 서버는 유효성 검증에서 실패하고 해당 사유의 에러 코드·메시지를 반환한다.
7-2-2-2. 회원은 실패 메시지를 확인하고 값을 수정해 재요청한다.

# 8. 내 주문 내역 조회
## 8-1. 정상 흐름
8-1-1. 회원이 마이페이지에 진입한다.
8-1-2. 회원이 “내 주문 내역 조회”를 클릭한다.
8-1-3. 서버는 로그인 정보를 검증하고, 해당 회원의 주문 내역 목록을 조회해 반환한다.
8-1-4. 회원은 주문 내역 리스트를 화면에서 확인한다.

## 8-2. 실패 흐름
### 8-2-1. 로그인 정보가 없거나 세션이 만료된 경우
8-2-1-1. 서버는 인증 검증에서 실패하고 에러 코드·메시지를 반환한다.

### 8-2-2. 주문 내역이 하나도 없는 경우
8-2-2-1. 서버는 빈 목록을 반환한다.

# 9. 내 장바구니 목록 조회
## 9-1. 정상 흐름
9-1-1. 회원이 마이페이지에 진입한다.
9-1-2. 회원이 “내 장바구니 목록 조회”를 클릭한다.
9-1-3. 서버는 로그인 정보를 검증하고, 해당 회원의 장바구니 목록을 조회하여 반환한다.
9-1-4. 회원은 장바구니 목록을 화면에서 확인한다.

## 9-2. 실패 흐름
### 9-2-1. 로그인 정보가 없거나 세션이 만료된 경우
9-2-1-1. 서버는 인증 검증에서 실패하고 에러 코드·메시지를 반환한다.

### 9-2-2. 장바구니에 담긴 상품이 없는 경우
9-2-2-1. 서버는 빈 목록을 반환한다.

